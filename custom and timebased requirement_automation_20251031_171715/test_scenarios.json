{
  "scenarios": [
    {
      "id": "TS001",
      "name": "E2E - Create Formula Metric, Add to Dashboard, and Configure Custom Target",
      "category": "End-to-End (E2E) Testing",
      "priority": "High",
      "description": "This scenario verifies the complete end-to-end happy path of a user logging in, creating a new formula-based metric, adding it to their dashboard, and successfully configuring a 4-level Custom target.",
      "user_journey": [
        "User logs in successfully and selects a company.",
        "User navigates from the Dashboard to the Metrics page.",
        "User clicks 'Add Metric' and enters a name for the new metric.",
        "User selects 'Formula' as the Value Source, revealing the Formula Builder.",
        "User searches for and selects the first metric for the formula.",
        "User selects a mathematical operator (+, -, /, *).",
        "User searches for and selects the second metric for the formula.",
        "User confirms the valid formula and saves the new metric.",
        "User navigates to 'My Dashboard'.",
        "User opens the 'Edit KPI' modal to manage dashboard metrics.",
        "User finds the newly created metric in the left panel and clicks to add it to the right panel.",
        "User saves the KPI configuration, and the modal closes.",
        "User hovers over the new metric card on the dashboard to reveal the three-dot menu.",
        "User clicks the three-dot menu and selects the 'Edit' option.",
        "On the Edit page, user navigates to the 'Target' tab.",
        "User selects the 'Custom' target option.",
        "User enters four descending values for Level 1, Level 2, Level 3, and Level 4.",
        "User clicks the 'Save' button to save the target configuration.",
        "User is redirected back to the dashboard."
      ],
      "acceptance_criteria": [
        "The user successfully logs in and lands on the main dashboard.",
        "The Formula Builder interface appears correctly after selecting 'Formula' as the value source.",
        "The formula metric is created successfully with the format '(Metric) [Operator] (Metric)'.",
        "The new metric is successfully added to the 'My KPIs' section on the dashboard.",
        "The user can successfully navigate to the metric's Edit page via the card's three-dot menu.",
        "The Custom target values are saved successfully.",
        "The metric card on the dashboard updates to display the visual indicators for the configured Custom target."
      ],
      "test_data_requirements": [
        "A valid user email and password.",
        "An existing company name assigned to the user.",
        "A unique metric_name for the new formula metric.",
        "Names of two existing metrics (first_metric, second_metric) to use in the formula.",
        "A valid mathematical operator.",
        "Four numeric custom_target_values in descending order (Level 1 > Level 2 > Level 3 > Level 4)."
      ]
    },
    {
      "id": "TS002",
      "name": "E2E - Create Formula Metric, Add to Dashboard, and Configure Time-Based Target",
      "category": "End-to-End (E2E) Testing",
      "priority": "High",
      "description": "This scenario verifies the complete end-to-end happy path of a user creating a formula metric, adding it to their dashboard, and successfully configuring a Time-Based target with a start and end value.",
      "user_journey": [
        "User logs in successfully and selects a company.",
        "User navigates to the Metrics page and initiates the creation of a new metric.",
        "User provides a name and selects 'Formula' as the Value Source.",
        "User builds a valid formula using two existing metrics and an operator.",
        "User saves the new formula metric.",
        "User navigates to 'My Dashboard' and opens the 'Edit KPI' modal.",
        "User adds the newly created metric to their 'My KPIs' list and saves.",
        "User locates the new metric card, hovers to reveal the three-dot menu, and clicks 'Edit'.",
        "On the Edit page, user selects the 'Target' tab.",
        "User selects the 'Time-Based' target radio button.",
        "User enters a 'Start' value and a 'Target' value.",
        "User clicks the 'Save' button to confirm the target configuration.",
        "User is returned to the dashboard after the save is complete."
      ],
      "acceptance_criteria": [
        "The user successfully creates and saves a formula-based metric.",
        "The new metric appears on the 'My Dashboard' after being added via the 'Edit KPI' modal.",
        "The Time-Based target configuration section appears correctly after its radio button is selected.",
        "The Start and Target values are saved successfully without errors.",
        "The metric card on the dashboard updates to display a progress indicator reflecting the configured Time-Based target."
      ],
      "test_data_requirements": [
        "A valid user email and password.",
        "An existing company name assigned to the user.",
        "A unique metric_name for the new formula metric.",
        "Names of two existing metrics (first_metric, second_metric).",
        "A valid mathematical operator.",
        "A numeric time_based_start_value.",
        "A numeric time_based_target_value."
      ]
    },
    {
      "id": "TS003",
      "name": "Dashboard KPI Management - Add an Existing Formula Metric to Dashboard",
      "category": "Integration Testing",
      "priority": "High",
      "description": "This scenario focuses on the user's ability to find a pre-existing formula metric and add it to their 'My KPIs' section on the dashboard, verifying the integration between the metric library and dashboard configuration.",
      "user_journey": [
        "User logs in and selects their company, landing on the dashboard.",
        "User locates the 'Edit KPI' icon/button in the 'My KPIs' section and clicks it.",
        "The 'Edit KPI' modal opens, displaying available metrics on the left and selected on the right.",
        "User locates the search input within the modal and enters the name of a pre-existing formula metric.",
        "The list of available metrics filters to show the searched metric.",
        "User finds the metric in the left panel and clicks on it.",
        "The metric automatically moves from the left (available) panel to the right (selected) panel.",
        "User clicks the 'Save' button in the modal.",
        "The modal closes, and the dashboard refreshes.",
        "The user scrolls to the 'My KPIs' section."
      ],
      "acceptance_criteria": [
        "The 'Edit KPI' modal opens successfully, showing two panels for available and selected metrics.",
        "Clicking a metric in the left panel successfully moves it to the right panel.",
        "After clicking 'Save', the modal closes and the dashboard refreshes.",
        "The newly added metric card is visible and correctly displayed in the 'My KPIs' section on the dashboard."
      ],
      "test_data_requirements": [
        "A valid user email and password.",
        "An existing company name assigned to the user.",
        "The name of a pre-existing formula metric that is not currently on the user's dashboard."
      ]
    }
  ],
  "dependencies": [
    "A valid, active user account with permissions to create metrics and edit dashboards must exist.",
    "The user must be assigned to at least one company.",
    "For formula creation, at least two existing metrics must be available in the system to be used as operands.",
    "The application's front-end and back-end services must be running and accessible."
  ],
  "edge_cases": [],
  "test_data": {
    "email": "[User email address]",
    "password": "[User password]",
    "company_name": "[Company to be selected]",
    "metric_name": "[Name of the metric to be created]",
    "value_source": "Formula",
    "format": "Number",
    "first_metric": "[Name of first metric to use in formula]",
    "operator": "[+, -, /, *, (, )]",
    "second_metric": "[Name of second metric to use in formula]",
    "target_type": "[Custom or Time-Based]",
    "custom_target_values": "[4 values from highest to lowest - Level 1, Level 2, Level 3, Level 4]",
    "time_based_start_value": "[Starting value]",
    "time_based_target_value": "[Target value to achieve]"
  }
}