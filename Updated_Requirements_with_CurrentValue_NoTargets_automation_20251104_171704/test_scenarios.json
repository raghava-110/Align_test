{
  "scenarios": [
    {
      "id": "TS001",
      "name": "End-to-End Multi-Metric Creation and Dashboard Addition in a Single Session",
      "description": "This scenario validates the complete end-to-end business flow where a user logs in once, selects a company, and sequentially creates three distinct metrics from an Excel data source. Each metric is then located and added to the 'My KPIs' section of the dashboard, all within a single, persistent user session.",
      "category": "End-to-End Business Flow Validation",
      "priority": "High",
      "user_journey": [
        "Step 1: Navigate to the Application URL.",
        "Step 2: Enter the user's email address and click 'Continue'.",
        "Step 3: Enter the user's password and click 'Login'.",
        "Step 4: Select the specified company from the list.",
        "Step 5: Verify successful navigation to the main dashboard.",
        "--- Begin Loop for 3 Excel Records ---",
        "Step 6: Navigate to the 'Metrics' page from the navigation menu.",
        "Step 7: Click the 'Add Metric' button.",
        "Step 8: Enter the 'Metric Name' from the current Excel record.",
        "Step 9: Enter the 'Current Value' from the current Excel record.",
        "Step 10: Select the 'Value Source' ('Formula' or 'Metric') from the current Excel record.",
        "Step 11-14 (Path A) or 11-12-ALT (Path B): Configure the value source by selecting existing metrics and operators for a formula, or by selecting a single existing metric.",
        "Step 16: Select the 'Cadence' from the current Excel record.",
        "Step 17: If Cadence is 'Weekly', select the 'Resets On' day from the current Excel record.",
        "Step 19: Click the 'Save' button to create the metric.",
        "Step 20: Navigate to 'My Dashboard'.",
        "Step 21: Click the 'Edit KPI' icon to open the modal.",
        "Step 23: Locate the newly created metric in the left panel of the modal.",
        "Step 24: Click the metric in the left panel to move it to the right panel.",
        "Step 25: Click the 'Save' button in the modal.",
        "--- End Loop ---",
        "Step 26: After the loop completes, verify all three newly created metrics are visible in the 'My KPIs' section on the dashboard."
      ],
      "acceptance_criteria": [
        "The user successfully logs in and selects a company only once at the beginning of the test.",
        "The test successfully reads and processes all three records from the Excel source file.",
        "Each of the three metrics is created successfully with its specified Name, Current Value, Value Source, and Cadence.",
        "A success message is displayed after each metric is saved.",
        "After creation, each of the three metrics is successfully found and added to the 'My KPIs' section.",
        "The dashboard refreshes correctly after adding each KPI, and the modal closes automatically.",
        "At the end of the test, all three metrics are simultaneously visible and correctly displayed in the 'My KPIs' section."
      ],
      "test_data_requirements": [
        "Valid user credentials (email and password).",
        "A valid company name that the user has access to.",
        "An Excel file containing exactly 3 data rows with valid data for each metric to be created, following the specified column structure.",
        "Pre-existing metrics in the system that can be used as the 'First Metric', 'Second Metric', or 'Metric to Select' as required by the Excel data."
      ]
    },
    {
      "id": "TS002",
      "name": "Create a 'Formula' Based Metric with a 'Weekly' Cadence",
      "description": "This scenario focuses on the successful creation of a single metric where the 'Value Source' is 'Formula'. It also validates the conditional UI logic where selecting a 'Weekly' cadence correctly displays the 'Resets On' dropdown, and the metric is saved successfully.",
      "category": "Metric Creation and Configuration",
      "priority": "High",
      "user_journey": [
        "Step 1-7: Successfully log in, select a company, navigate to the Metrics page, and click 'Add Metric'.",
        "Step 8: Enter a valid metric name.",
        "Step 9: Enter a valid numeric 'Current Value'.",
        "Step 10: Select 'Formula' from the 'Value Source' dropdown.",
        "Step 11: Verify the 'Formula Builder' interface is displayed.",
        "Step 12: Search for and select the 'First Metric' for the formula.",
        "Step 13: Select an operator (e.g., '+').",
        "Step 14: Search for and select the 'Second Metric' for the formula.",
        "Step 15: Verify the complete formula is displayed correctly.",
        "Step 16: Select 'Weekly' from the 'Cadence' dropdown.",
        "Step 17: Verify the 'Resets On' dropdown appears, and select a day (e.g., 'Monday').",
        "Step 18: Click the green checkmark button to confirm the formula.",
        "Step 19: Click the 'Save' button.",
        "Step 20-25: Navigate to 'My Dashboard' and successfully add the newly created metric to 'My KPIs'."
      ],
      "acceptance_criteria": [
        "Upon selecting 'Formula' as the 'Value Source', the Formula Builder interface with metric search and operator buttons becomes visible.",
        "The formula is constructed correctly in the display area as metrics and operators are selected.",
        "Upon selecting 'Weekly' as the 'Cadence', the 'Resets On' dropdown field is displayed.",
        "The metric is saved successfully, and a confirmation message is shown.",
        "The newly created formula-based metric can be found and added to the 'My KPIs' section on the dashboard."
      ],
      "test_data_requirements": [
        "A test data record where 'Value_Source' is 'Formula'.",
        "A test data record where 'Cadence' is 'Weekly' and 'Resets_On' is a valid day.",
        "Names of two pre-existing metrics to be used in the formula ('First_Metric', 'Second_Metric').",
        "A valid operator ('+', '-', '/', '*')."
      ]
    },
    {
      "id": "TS003",
      "name": "Create a 'Metric' Based Metric with a 'Monthly' Cadence",
      "description": "This scenario focuses on the successful creation of a single metric where the 'Value Source' is 'Metric'. It validates that the correct UI for metric selection appears and that for a non-weekly cadence (e.g., 'Monthly'), the 'Resets On' field does not appear.",
      "category": "Conditional UI Logic Testing",
      "priority": "High",
      "user_journey": [
        "Step 1-7: Successfully log in, select a company, navigate to the Metrics page, and click 'Add Metric'.",
        "Step 8: Enter a valid metric name.",
        "Step 9: Enter a valid numeric 'Current Value'.",
        "Step 10: Select 'Metric' from the 'Value Source' dropdown.",
        "Step 11-ALT: Verify the metric selection interface is displayed.",
        "Step 12-ALT: Search for and select an existing metric from the dropdown/search results.",
        "Step 16: Select 'Monthly' from the 'Cadence' dropdown.",
        "Step 17: Verify that the 'Resets On' dropdown does NOT appear.",
        "Step 19: Click the 'Save' button.",
        "Step 20-25: Navigate to 'My Dashboard' and successfully add the newly created metric to 'My KPIs'."
      ],
      "acceptance_criteria": [
        "Upon selecting 'Metric' as the 'Value Source', the metric selection search/dropdown field becomes visible.",
        "Upon selecting 'Monthly' as the 'Cadence', the 'Resets On' dropdown field remains hidden.",
        "The user can successfully search for and select a pre-existing metric.",
        "The new metric is saved successfully, and a confirmation message is shown.",
        "The newly created metric-based metric is visible in the 'My KPIs' section after being added."
      ],
      "test_data_requirements": [
        "A test data record where 'Value_Source' is 'Metric'.",
        "A test data record where 'Cadence' is 'Monthly', 'Quarterly', or 'Yearly'.",
        "The name of a pre-existing metric to be used as the source ('Selected_Metric')."
      ]
    }
  ],
  "dependencies": [
    "A stable and persistent user session is required for the entire duration of the test to avoid premature logouts.",
    "The application's backend and UI must be responsive, with explicit waits implemented in the test script to handle asynchronous operations like search results and modal loading.",
    "The test is dependent on pre-existing data. Any metrics referenced in the 'Formula' or 'Metric' value source types must exist in the application before the test runs.",
    "The test automation framework must be capable of reading and correctly parsing data from an .xlsx or .xls file.",
    "The user account must have the necessary permissions to create metrics and customize the 'My KPIs' dashboard."
  ],
  "edge_cases": [],
  "test_data": {
    "base_url": "https://alignwebdev.aligntoday.com/",
    "user_email": "sudhirbd@gmail.com",
    "user_password": "Mindlinks2025#",
    "company_name_placeholder": "[Your company name]",
    "value_source_options": [
      "Formula",
      "Metric"
    ],
    "cadence_options": [
      "Weekly",
      "Monthly",
      "Quarterly",
      "Yearly"
    ],
    "resets_on_options": [
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
      "Sunday"
    ],
    "operator_options": [
      "+",
      "-",
      "/",
      "*",
      "(",
      ")"
    ]
  }
}